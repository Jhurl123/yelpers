<div class="c-input" *ngIf="currentUser; else notLoggedIn">
  <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()" *ngIf="!formSubmitted; else reviewSubmitted">
    <h4 class="c-input_header">Write A Review </h4>
    <div class="c-input_rating-container">
      <star-rating
        value="{{ reviewRating }}"
        checkedcolor="#FEC011"
        uncheckedcolor="#e7e2e2"
        size="24px"
        readonly="false"
        (rate)="onRate($event)"
      ></star-rating>
      <span> - Select your rating</span>
    </div>
    <textarea
      formControlName="reviewText"
      name="reviewText"
      id="reviewText"
      placeholder="Tell other consumers about your experience!"
      rows="8"></textarea>
    <app-alert [hidden]="submitFailure" [alertType]="submitFailure" [alertText]="alertText"></app-alert>
    <button class="button alt" type="submit">Submit</button>
  </form>

  <ng-template #reviewSubmitted>
    <div class="c-input_confirmation">
      <h4>Thanks for your review!</h4>
      <p>You've already submitted a review!</p>
    </div>
  </ng-template>

</div>
<ng-template #notLoggedIn>
  <h4>
    Please
    <a routerLink="/login" [queryParams]="{returnUrl: '/business/' + businessId }">
      Log in
    </a>
    to post a comment
  </h4>
</ng-template>
